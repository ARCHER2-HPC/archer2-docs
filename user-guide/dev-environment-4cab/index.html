
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="../../favicon.ico">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.11">
    
    
      
        <title>Application development environment: 4-cabinet system - ARCHER2 User Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7e359304.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/archer2.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-XVNML97F1T"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-XVNML97F1T",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-XVNML97F1T",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#application-development-environment-4-cabinet-system" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="ARCHER2 User Documentation" class="md-header__button md-logo" aria-label="ARCHER2 User Documentation" data-md-component="logo">
      
  <img src="../../images/archer2_white_transparent.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ARCHER2 User Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Application development environment: 4-cabinet system
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/ARCHER2-HPC/archer2-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    ARCHER2-HPC/archer2-docs
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ARCHER2 User Documentation" class="md-nav__button md-logo" aria-label="ARCHER2 User Documentation" data-md-component="logo">
      
  <img src="../../images/archer2_white_transparent.png" alt="logo">

    </a>
    ARCHER2 User Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ARCHER2-HPC/archer2-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    ARCHER2-HPC/archer2-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Documentation overview
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Quickstart
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Quickstart
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quick-start/overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quick-start/quickstart-users/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quickstart for users
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quick-start/quickstart-developers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quickstart for developers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quick-start/quickstart-next-steps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quickstart next steps
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../known-issues/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ARCHER2 Known Issues
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ARCHER2 Frequently Asked Questions
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            ARCHER2 Frequently Asked Questions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../faq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    General FAQ
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    User and Best Practice Guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            User and Best Practice Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hardware/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hardware
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../connecting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Connecting to ARCHER2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data management and transfer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sw-environment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Software environment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../scheduler/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Running jobs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../io/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    I/O and file systems
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dev-environment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Application development environment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../containers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Containers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../python/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using Python
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../analysis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data analysis
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../debug/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Debugging
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../profile/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Profiling
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tuning/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Performance tuning
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../energy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Energy use
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../gpu/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GPU development platform
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Research Software
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Research Software
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../research-software/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../research-software/casino/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CASINO
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../research-software/castep/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CASTEP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../research-software/cesm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CESM2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../research-software/chemshell/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Chemshell
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../research-software/code-saturne/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Code_Saturne
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../research-software/cp2k/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CP2K
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../research-software/crystal/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CRYSTAL
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../research-software/fhi-aims/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FHI-aims
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../research-software/gromacs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GROMACS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../research-software/lammps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LAMMPS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../research-software/mitgcm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MITgcm
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../research-software/mo-unified-model/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Met Office Unified Model
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../research-software/namd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NAMD
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../research-software/nektarplusplus/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Nektar++
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../research-software/nemo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NEMO
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../research-software/nwchem/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NWChem
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../research-software/onetep/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ONETEP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../research-software/openfoam/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OpenFOAM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../research-software/orca/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ORCA
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../research-software/qe/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quantum Espresso
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../research-software/vasp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VASP
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Software Libraries
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Software Libraries
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software-libraries/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software-libraries/libsci/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HPE Cray LibSci: BLAS, LAPACK, ScaLAPACK
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software-libraries/fftw/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FFTW
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software-libraries/hdf5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HDF5
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software-libraries/netcdf/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NetCDF
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software-libraries/adios/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ADIOS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software-libraries/aocl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AOCL
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software-libraries/arpack/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ARPACK
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software-libraries/boost/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Boost
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software-libraries/eigen/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Eigen
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software-libraries/glm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GLM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software-libraries/hypre/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HYPRE
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software-libraries/matio/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Matio
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software-libraries/mkl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Intel MKL
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software-libraries/mesa/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MESA
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software-libraries/mumps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MUMPS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software-libraries/petsc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PETSc
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software-libraries/metis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Metis/Parmetis
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software-libraries/scotch/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Scotch/PT-Scotch
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software-libraries/slepc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SLEPc
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software-libraries/superlu/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SuperLU/SuperLU_DIST
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../software-libraries/trilinos/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Trilinos
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Data Analysis and Tools
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Data Analysis and Tools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data-tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data-tools/amd-uprof/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AMD uProf
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data-tools/arm-forge/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Arm Forge
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data-tools/darshan/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Darshan
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data-tools/pm-mpi-lib/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Energy Counters
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data-tools/julia/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Julia
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data-tools/paraview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ParaView
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data-tools/cray-r/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    R
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data-tools/visidata/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VisiData
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../data-tools/vmd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VMD
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../essentials/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Essential Skills
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../publish/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ARCHER2 and Publications
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#whats-available" class="md-nav__link">
    <span class="md-ellipsis">
      What's available
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#managing-development" class="md-nav__link">
    <span class="md-ellipsis">
      Managing development
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compilation-environment" class="md-nav__link">
    <span class="md-ellipsis">
      Compilation environment
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Compilation environment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#compiler-man-pages-and-help" class="md-nav__link">
    <span class="md-ellipsis">
      Compiler man pages and help
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dynamic-linking" class="md-nav__link">
    <span class="md-ellipsis">
      Dynamic Linking
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#which-compiler-environment" class="md-nav__link">
    <span class="md-ellipsis">
      Which compiler environment?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#amd-optimizing-cc-compiler-aocc" class="md-nav__link">
    <span class="md-ellipsis">
      AMD Optimizing C/C++ Compiler (AOCC)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AMD Optimizing C/C++ Compiler (AOCC)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aocc-reference-material" class="md-nav__link">
    <span class="md-ellipsis">
      AOCC reference material
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cray-compiler-environment-cce" class="md-nav__link">
    <span class="md-ellipsis">
      Cray compiler environment (CCE)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Cray compiler environment (CCE)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#useful-cce-cc-options" class="md-nav__link">
    <span class="md-ellipsis">
      Useful CCE C/C++ options
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#useful-cce-fortran-options" class="md-nav__link">
    <span class="md-ellipsis">
      Useful CCE Fortran options
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gnu-compiler-collection-gcc" class="md-nav__link">
    <span class="md-ellipsis">
      GNU compiler collection (GCC)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="GNU compiler collection (GCC)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#useful-gnu-fortran-options" class="md-nav__link">
    <span class="md-ellipsis">
      Useful Gnu Fortran options
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reference-material" class="md-nav__link">
    <span class="md-ellipsis">
      Reference material
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#message-passing-interface-mpi" class="md-nav__link">
    <span class="md-ellipsis">
      Message passing interface (MPI)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Message passing interface (MPI)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hpe-cray-mpich" class="md-nav__link">
    <span class="md-ellipsis">
      HPE Cray MPICH
    </span>
  </a>
  
    <nav class="md-nav" aria-label="HPE Cray MPICH">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mpi-reference-material" class="md-nav__link">
    <span class="md-ellipsis">
      MPI reference material
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#linking-and-libraries" class="md-nav__link">
    <span class="md-ellipsis">
      Linking and libraries
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Linking and libraries">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#commonly-used-libraries" class="md-nav__link">
    <span class="md-ellipsis">
      Commonly used libraries
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#switching-to-a-different-hpe-cray-programming-environment-release" class="md-nav__link">
    <span class="md-ellipsis">
      Switching to a different HPE Cray Programming Environment release
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Switching to a different HPE Cray Programming Environment release">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#available-hpe-cray-programming-environment-releases-on-archer2" class="md-nav__link">
    <span class="md-ellipsis">
      Available HPE Cray Programming Environment releases on ARCHER2
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-non-default-versions-of-hpe-cray-libraries-on-archer2" class="md-nav__link">
    <span class="md-ellipsis">
      Using non-default versions of HPE Cray libraries on ARCHER2
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compiling-in-compute-nodes" class="md-nav__link">
    <span class="md-ellipsis">
      Compiling in compute nodes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#build-instructions-for-software-on-archer2" class="md-nav__link">
    <span class="md-ellipsis">
      Build instructions for software on ARCHER2
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#support-for-building-software-on-archer2" class="md-nav__link">
    <span class="md-ellipsis">
      Support for building software on ARCHER2
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="application-development-environment-4-cabinet-system">Application development environment: 4-cabinet system</h1>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>This section covers the application development environment on the initial, 4-cabinet
ARCHER2 system. For docmentation on the application development environment on the
full ARCHER2 system, please see <a href="../sw-environment/">Application development environment: full system</a>.</p>
</div>
<h2 id="whats-available">What's available</h2>
<p>ARCHER2 runs on the Cray Linux Environment (a version of SUSE Linux),
and provides a development environment which includes:</p>
<ul>
<li>Software modules via a standard module framework</li>
<li>Three different compiler environments (AMD, Cray, and GNU)</li>
<li>MPI, OpenMP, and SHMEM</li>
<li>Scientific and numerical libraries</li>
<li>Parallel Python and R</li>
<li>Parallel debugging and profiling</li>
<li>Singularity containers</li>
</ul>
<p>Access to particular software, and particular versions, is managed by a
standard TCL module framework. Most software is available via standard
software modules and the different programming environments are
available via module collections.</p>
<p>You can see what programming environments are available with:</p>
<pre><code>auser@uan01:~&gt; module savelist
Named collection list:
 1) PrgEnv-aocc   2) PrgEnv-cray   3) PrgEnv-gnu
</code></pre>
<p>Other software modules can be listed with</p>
<div class="highlight"><pre><span></span><code>auser@uan01:~&gt; module avail
------------------------------- /opt/cray/pe/perftools/20.09.0/modulefiles --------------------------------
perftools       perftools-lite-events  perftools-lite-hbm    perftools-nwpc     
perftools-lite  perftools-lite-gpu     perftools-lite-loops  perftools-preload  

---------------------------------- /opt/cray/pe/craype/2.7.0/modulefiles ----------------------------------
craype-hugepages1G  craype-hugepages8M   craype-hugepages128M  craype-network-ofi          
craype-hugepages2G  craype-hugepages16M  craype-hugepages256M  craype-network-slingshot10  
craype-hugepages2M  craype-hugepages32M  craype-hugepages512M  craype-x86-rome             
craype-hugepages4M  craype-hugepages64M  craype-network-none   

------------------------------------- /usr/local/Modules/modulefiles --------------------------------------
dot  module-git  module-info  modules  null  use.own  

-------------------------------------- /opt/cray/pe/cpe-prgenv/7.0.0 --------------------------------------
cpe-aocc  cpe-cray  cpe-gnu  

-------------------------------------------- /opt/modulefiles ---------------------------------------------
aocc/2.1.0.3(default)  cray-R/4.0.2.0(default)  gcc/8.1.0  gcc/9.3.0  gcc/10.1.0(default)  


---------------------------------------- /opt/cray/pe/modulefiles -----------------------------------------
atp/3.7.4(default)              cray-mpich-abi/8.0.15             craype-dl-plugin-py3/20.06.1(default)  
cce/10.0.3(default)             cray-mpich-ucx/8.0.15             craype/2.7.0(default)                  
cray-ccdb/4.7.1(default)        cray-mpich/8.0.15(default)        craypkg-gen/1.3.10(default)            
cray-cti/2.7.3(default)         cray-netcdf-hdf5parallel/4.7.4.0  gdb4hpc/4.7.3(default)                 
cray-dsmml/0.1.2(default)       cray-netcdf/4.7.4.0               iobuf/2.0.10(default)                  
cray-fftw/3.3.8.7(default)      cray-openshmemx/11.1.1(default)   papi/6.0.0.2(default)                  
cray-ga/5.7.0.3                 cray-parallel-netcdf/1.12.1.0     perftools-base/20.09.0(default)        
cray-hdf5-parallel/1.12.0.0     cray-pmi-lib/6.0.6(default)       valgrind4hpc/2.7.2(default)            
cray-hdf5/1.12.0.0              cray-pmi/6.0.6(default)           
cray-libsci/20.08.1.2(default)  cray-python/3.8.5.0(default)      
</code></pre></div>
<p>A full discussion of the module system is available in
<a href="../sw-environment/">the Software environment section</a>.</p>
<p>A consistent set of modules is loaded on login to the machine (currently
<code>PrgEnv-cray</code>, see below). Developing applications then means selecting
and loading the appropriate set of modules before starting work.</p>
<p>This section is aimed at code developers and will concentrate on the
compilation environment and building libraries and executables, and
specifically parallel executables. Other topics such as <a href="../python/">Python</a> and
<a href="../containers/">Containers</a> are covered in more detail in separate sections of the
documentation.</p>
<h2 id="managing-development">Managing development</h2>
<p>ARCHER2 supports common revision control software such as <code>git</code>.</p>
<p>Standard GNU autoconf tools are available, along with <code>make</code> (which is
GNU Make). Versions of <code>cmake</code> are available.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Some of these tools are part of the system software, and
typically reside in <code>/usr/bin</code>, while others are provided as part of the
module system. Some tools may be available in different versions via
both <code>/usr/bin</code> and via the module system.</p>
</div>
<h2 id="compilation-environment">Compilation environment</h2>
<p>There are three different compiler environments available on ARCHER2:
AMD (AOCC), Cray (CCE), and GNU (GCC). The current compiler suite is selected via the
programming environment, while the specific compiler versions are
determined by the relevant compiler module. A summary is:</p>
<table>
<thead>
<tr>
<th>Suite name</th>
<th>Module</th>
<th>Programming environment collection</th>
</tr>
</thead>
<tbody>
<tr>
<td>CCE</td>
<td><code>cce</code></td>
<td><code>PrgEnv-cray</code></td>
</tr>
<tr>
<td>GCC</td>
<td><code>gcc</code></td>
<td><code>PrgEnv-gnu</code></td>
</tr>
<tr>
<td>AOCC</td>
<td><code>aocc</code></td>
<td><code>PrgEnv-aocc</code></td>
</tr>
</tbody>
</table>
<p>For example, at login, the default set of modules are:</p>
<div class="highlight"><pre><span></span><code>Currently Loaded Modulefiles:
1) cpe-cray                          7) cray-dsmml/0.1.2(default)                           
2) cce/10.0.3(default)               8) perftools-base/20.09.0(default)                     
3) craype/2.7.0(default)             9) xpmem/2.2.35-7.0.1.0_1.3__gd50fabf.shasta(default)  
4) craype-x86-rome                  10) cray-mpich/8.0.15(default)                          
5) libfabric/1.11.0.0.233(default)  11) cray-libsci/20.08.1.2(default)                      
6) craype-network-ofi  
</code></pre></div>
<p>from which we see the default programming environment is Cray (indicated
by <code>cpe-cray</code> (at 1 in the list above) and the default compiler module
is <code>cce/10.0.3</code> (at 2 in the list above). The programming environment
will give access to a consistent set of compiler, MPI library via
<code>cray-mpich</code> (at 10), and other libraries e.g., <code>cray-libsci</code> (at 11 in
the list above) infrastructure.</p>
<p>Within a given programming environment, it is possible to swap to a
different compiler version by swapping the relevant compiler module.</p>
<p>To ensure consistent behaviour, compilation of C, C++, and Fortran
source code should then take place using the appropriate compiler
wrapper: <code>cc</code>, <code>CC</code>, and <code>ftn</code>, respectively. The wrapper will
automatically call the relevant underlying compiler and add the
appropriate include directories and library locations to the invocation.
This typically eliminates the need to specify this additional
information explicitly in the configuration stage. To see the details of
the exact compiler invocation use the <code>-craype-verbose</code> flag to the
compiler wrapper.</p>
<p>The default link time behaviour is also related to the current
programming environment. See the section below on <a href="#linking-and-libraries">Linking and
libraries</a>.</p>
<p>Users should not, in general, invoke specific compilers at compile/link
stages. In particular, <code>gcc</code>, which may default to <code>/usr/bin/gcc</code>,
should not be used. The compiler wrappers <code>cc</code>, <code>CC</code>, and <code>ftn</code> should
be used via the appropriate module. Other common MPI compiler wrappers
e.g., <code>mpicc</code> should also be replaced by the relevant wrapper <code>cc</code>
(<code>mpicc</code> etc are not available).</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Always use the compiler wrappers <code>cc</code>, <code>CC</code>, and/or <code>ftn</code> and not a
specific compiler invocation. This will ensure consistent compile/link
time behaviour.</p>
</div>
<h3 id="compiler-man-pages-and-help">Compiler man pages and help</h3>
<p>Further information on both the compiler wrappers, and the individual
compilers themselves are available via the command line, and via
standard <code>man</code> pages. The <code>man</code> page for the compiler wrappers is common
to all programming environments, while the <code>man</code> page for individual
compilers depends on the currently loaded programming environment. The
following table summarises options for obtaining information on the
compiler and compile options:</p>
<table>
<thead>
<tr>
<th>Compiler suite</th>
<th>C</th>
<th>C++</th>
<th>Fortran</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cray</td>
<td><code>man craycc</code></td>
<td><code>man crayCC</code></td>
<td><code>man crayftn</code></td>
</tr>
<tr>
<td>GNU</td>
<td><code>man gcc</code></td>
<td><code>man g++</code></td>
<td><code>man gfortran</code></td>
</tr>
<tr>
<td>Wrappers</td>
<td><code>man cc</code></td>
<td><code>man CC</code></td>
<td><code>man ftn</code></td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can also pass the <code>--help</code> option to any of the compilers or
wrappers to get a summary of how to use them. The Cray Fortran
compiler uses <code>ftn --craype-help</code> to access the help options.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>There are no <code>man</code> pages for the AOCC compilers at the moment.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Cray C/C++ is based on Clang and therefore
supports similar options to clang/gcc (<code>man clang</code> is in fact equivalent
to <code>man craycc</code>). <code>clang --help</code> will produce a full summary
of options with Cray-specific options marked "Cray". The <code>craycc</code> man
page concentrates on these Cray extensions to the <code>clang</code> front end and
does not provide an exhaustive description of all <code>clang</code> options.
Cray Fortran <strong>is not</strong> based on Flang and so takes different options
from flang/gfortran.</p>
</div>
<h3 id="dynamic-linking">Dynamic Linking</h3>
<p>Executables on ARCHER2 link dynamically, and the Cray Programming
Environment does not currently support static linking. This is in
contrast to ARCHER where the default was to build statically.</p>
<p>If you attempt to link statically, you will see errors similar to:</p>
<pre><code>/usr/bin/ld: cannot find -lpmi
/usr/bin/ld: cannot find -lpmi2
collect2: error: ld returned 1 exit status
</code></pre>
<p>The compiler wrapper scripts on ARCHER link runtime libraries in using
the <code>runpath</code> by default. This means that the paths to the runtime
libraries are encoded into the executable so you do not need to load the
compiler environment in your job submission scripts.</p>
<h3 id="which-compiler-environment">Which compiler environment?</h3>
<p>If you are unsure which compiler you should choose, we suggest the
starting point should be the GNU compiler collection (GCC,
<code>PrgEnv-gnu</code>); this is perhaps the most commonly used by code
developers, particularly in the open source software domain. A portable,
standard-conforming code should (in principle) compile in any of the
three programming environments.</p>
<p>For users requiring specific compiler features, such as co-array
Fortran, the recommended starting point would be Cray. The following
sections provide further details of the different programming
environments.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Intel compilers are not available on ARCHER2.</p>
</div>
<h3 id="amd-optimizing-cc-compiler-aocc">AMD Optimizing C/C++ Compiler (AOCC)</h3>
<p>The AMD Optimizing C/++ Compiler (AOCC) is a clang-based optimising
compiler. AOCC (despite its name) includes a flang-based Fortran
compiler.</p>
<p>Switch the the AOCC programming environment via</p>
<pre><code>$ module restore PrgEnv-aocc
</code></pre>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Further details on AOCC will appear here as they become available.</p>
</div>
<h4 id="aocc-reference-material">AOCC reference material</h4>
<ul>
<li>AMD website<br />
<a href="https://developer.amd.com/amd-aocc/">https://developer.amd.com/amd-aocc/</a></li>
</ul>
<h3 id="cray-compiler-environment-cce">Cray compiler environment (CCE)</h3>
<p>The Cray compiler environment (CCE) is the default compiler at the point
of login. CCE supports C/C++ (along with unified parallel C UPC), and
Fortran (including co-array Fortran). Support for OpenMP parallelism is
available for both C/C++ and Fortran (currently OpenMP 4.5, with a
number of exceptions).</p>
<p>The Cray C/C++ compiler is based on a clang front end, and so compiler
options are similar to those for gcc/clang. However, the Fortran
compiler remains based around Cray-specific options. Be sure to separate
C/C++ compiler options and Fortran compiler options (typically <code>CFLAGS</code>
and <code>FFLAGS</code>) if compiling mixed C/Fortran applications.</p>
<p>Switch the the Cray programming environment via</p>
<pre><code>$ module restore PrgEnv-cray
</code></pre>
<h4 id="useful-cce-cc-options">Useful CCE C/C++ options</h4>
<p>When using the compiler wrappers <code>cc</code> or <code>CC</code>, some of the following
options may be
useful:</p>
<p>Language, warning, Debugging options:</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Comment</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-std=&lt;standard&gt;</code></td>
<td>Default is <code>-std=gnu11</code> (<code>gnu++14</code> for C++) [1]</td>
</tr>
</tbody>
</table>
<p>Performance options:</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Comment</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-Ofast</code></td>
<td>Optimisation levels: -O0, -O1, -O2, -O3, -Ofast</td>
</tr>
<tr>
<td><code>-ffp=level</code></td>
<td>Floating point maths optimisations levels 0-4 [2]</td>
</tr>
<tr>
<td><code>-flto</code></td>
<td>Link time optimisation</td>
</tr>
</tbody>
</table>
<p>Miscellaneous options:</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Comment</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-fopenmp</code></td>
<td>Compile OpenMP (default is off)</td>
</tr>
<tr>
<td><code>-v</code></td>
<td>Display verbose output from compiler stages</td>
</tr>
</tbody>
</table>
<div class="admonition notes">
<p class="admonition-title">Notes</p>
<ol>
<li>Option <code>-std=gnu11</code> gives <code>c11</code> plus GNU extensions (likewise
    <code>c++14</code> plus GNU extensions). See
    <a href="https://gcc.gnu.org/onlinedocs/gcc-4.8.2/gcc/C-Extensions.html">https://gcc.gnu.org/onlinedocs/gcc-4.8.2/gcc/C-Extensions.html</a></li>
<li>Option <code>-ffp=3</code> is implied by <code>-Ofast</code> or <code>-ffast-math</code></li>
</ol>
</div>
<h4 id="useful-cce-fortran-options">Useful CCE Fortran options</h4>
<p>Language, Warning, Debugging options:</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Comment</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-m &lt;level&gt;</code></td>
<td>Message level (default <code>-m 3</code> errors and warnings)</td>
</tr>
</tbody>
</table>
<p>Performance options:</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Comment</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-O &lt;level&gt;</code></td>
<td>Optimisation levels: -O0 to -O3 (default -O2)</td>
</tr>
<tr>
<td><code>-h fp&lt;level&gt;</code></td>
<td>Floating point maths optimisations levels 0-3</td>
</tr>
<tr>
<td><code>-h ipa</code></td>
<td>Inter-procedural analysis</td>
</tr>
</tbody>
</table>
<p>Miscellaneous options:</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Comment</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-h omp</code></td>
<td>Compile OpenMP (default is <code>-hnoomp</code>)</td>
</tr>
<tr>
<td><code>-v</code></td>
<td>Display verbose output from compiler stages</td>
</tr>
</tbody>
</table>
<h3 id="gnu-compiler-collection-gcc">GNU compiler collection (GCC)</h3>
<p>The commonly used open source GNU compiler collection is available and
provides C/C++ and Fortran compilers.</p>
<p>The GNU compiler collection is loaded by switching to the GNU
programming environment:</p>
<pre><code>$ module restore PrgEnv-gnu
</code></pre>
<div class="admonition bug">
<p class="admonition-title">Bug</p>
<p>The <code>gcc/8.1.0</code> module is available on ARCHER2 but cannot be used as the
supporting scientific and system libraries are not available. You should
<strong>not</strong> use this version of GCC.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you want to use GCC version 10 or greater to compile Fortran code,
with the old MPI interfaces (i.e. <code>use mpi</code> or <code>INCLUDE 'mpif.h'</code>) you
<strong>must</strong> add the <code>-fallow-argument-mismatch</code> option (or equivalent) when compiling
otherwise you will see compile errors associated with MPI functions.
The reason for this is that past versions of <code>gfortran</code> have allowed
mismatched arguments to external procedures (e.g., where an explicit
interface is not available). This is often the case for MPI routines
using the old MPI interfaces where arrays of different types are passed
to, for example, <code>MPI_Send()</code>. This will now generate an error as not
standard conforming. The <code>-fallow-argument-mismatch</code> option is used
to reduce the error to a warning. The same effect may be achieved via
<code>-std=legacy</code>.</p>
<p>If you use the Fortran 2008 MPI interface (i.e. <code>use mpi_f08</code>) then you
should not need to add this option.</p>
<p>Fortran language MPI bindings are described in more detail at
in <a href="https://www.mpi-forum.org/docs/mpi-3.1/mpi31-report/node408.htm">the MPI Standard documentation</a>.</p>
</div>
<h4 id="useful-gnu-fortran-options">Useful Gnu Fortran options</h4>
<table>
<thead>
<tr>
<th>Option</th>
<th>Comment</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-std=&lt;standard&gt;</code></td>
<td>Default is gnu</td>
</tr>
<tr>
<td><code>-fallow-argument-mismatch</code></td>
<td>Allow mismatched procedure arguments. This argument is required for compiling MPI Fortran code with GCC version 10 or greater if you are using the older MPI interfaces (see warning above)</td>
</tr>
<tr>
<td><code>-fbounds-check</code></td>
<td>Use runtime checking of array indices</td>
</tr>
<tr>
<td><code>-fopenmp</code></td>
<td>Compile OpenMP (default is no OpenMP)</td>
</tr>
<tr>
<td><code>-v</code></td>
<td>Display verbose output from compiler stages</td>
</tr>
</tbody>
</table>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The <code>standard</code> in <code>-std</code> may be one of <code>f95</code> <code>f2003</code>, <code>f2008</code> or
<code>f2018</code>. The default option <code>-std=gnu</code> is the latest Fortran standard
plus gnu extensions.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Past versions of <code>gfortran</code> have allowed mismatched arguments to
external procedures (e.g., where an explicit interface is not
available). This is often the case for MPI routines where arrays of
different types are passed to <code>MPI_Send()</code> and so on. This will now
generate an error as not standard conforming. Use
<code>-fallow-argument-mismatch</code> to reduce the error to a warning. The same
effect may be achieved via <code>-std=legacy</code>.</p>
</div>
<h4 id="reference-material">Reference material</h4>
<ul>
<li>
<p>C/C++ documentation<br />
<a href="https://gcc.gnu.org/onlinedocs/gcc-9.3.0/gcc/">https://gcc.gnu.org/onlinedocs/gcc-9.3.0/gcc/</a></p>
</li>
<li>
<p>Fortran documentation<br />
<a href="https://gcc.gnu.org/onlinedocs/gcc-9.3.0/gfortran/">https://gcc.gnu.org/onlinedocs/gcc-9.3.0/gfortran/</a></p>
</li>
</ul>
<h2 id="message-passing-interface-mpi">Message passing interface (MPI)</h2>
<h3 id="hpe-cray-mpich">HPE Cray MPICH</h3>
<p>HPE Cray provide, as standard, an MPICH implementation of the message
passing interface which is specifically optimised for the ARCHER2
network. The current implementation supports MPI standard version 3.1.</p>
<p>The HPE Cray MPICH implementation is linked into software by default when
compiling using the standard wrapper scripts: <code>cc</code>, <code>CC</code> and <code>ftn</code>.</p>
<h4 id="mpi-reference-material">MPI reference material</h4>
<p>MPI standard documents: <a href="https://www.mpi-forum.org/docs/">https://www.mpi-forum.org/docs/</a></p>
<h2 id="linking-and-libraries">Linking and libraries</h2>
<p>Linking to libraries is performed dynamically on ARCHER2. One can use
the <code>-craype-verbose</code> flag to the compiler wrapper to check exactly what
linker arguments are invoked. The compiler wrapper scripts encode the
paths to the programming environment system libraries using RUNPATH.
This ensures that the executable can find the correct runtime
libraries without the matching software modules loaded.</p>
<p>The library RUNPATH associated with an executable can be inspected via,
e.g.,</p>
<pre><code>$ readelf -d ./a.out
</code></pre>
<p>(swap <code>a.out</code> for the name of the executable you are querying).</p>
<h3 id="commonly-used-libraries">Commonly used libraries</h3>
<p>Modules with names prefixed by <code>cray-</code> are provided by HPE Cray, and are
supported to be consistent with any of the programming environments and
associated compilers. These modules should be the first choice for
access to software libraries if available.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>More information on the different software libraries on ARCHER2 can
be found in the <a href="../software-libraries/">Software libraries</a>
section of the user guide.</p>
</div>
<h2 id="switching-to-a-different-hpe-cray-programming-environment-release">Switching to a different HPE Cray Programming Environment release</h2>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>See the section below on using non-default versions of HPE Cray libraries
below as this process will generally need to be followed when using software
from non-default PE installs.</p>
</div>
<p>Access to non-default PE environments is controlled by the use of the <code>cpe</code> modules.
These modules are typically loaded <em>after</em> you have restored a PrgEnv and loaded all
the other modules you need and will 
set your compile environment to match that in the other PE release. This means:</p>
<ul>
<li>The compiler version will be switched to the one from the selected PE</li>
<li>HPE Cray provided libraries (or modules) that are loaded before you switch
  to the new programming environment are switched to those from the programming
  environment that you select.</li>
</ul>
<p>For example, if you have a code that uses the Gnu programming environment, FFTW
and NetCDF parallel libraries and you want to compile in the (non-default) 21.03
programming environment, you would do the following:</p>
<p>First, restore the Gnu programming environment and load the required library
modules (FFTW and NetCDF HDF5 parallel). The loaded module list shows they 
are the versions from the default (20.10) programming environment):</p>
<div class="highlight"><pre><span></span><code>auser@uan02:/work/t01/t01/auser&gt; module restore -s PrgEnv-gnu
auser@uan02:/work/t01/t01/auser&gt; module load cray-fftw
auser@uan02:/work/t01/t01/auser&gt; module load cray-netcdf
auser@uan02:/work/t01/t01/auser&gt; module load cray-netcdf-hdf5parallel
auser@uan02:/work/t01/t01/auser&gt; module list
Currently Loaded Modulefiles:
 1) cpe-gnu                           9) xpmem/2.2.35-7.0.1.0_1.9__gd50fabf.shasta(default)               
 2) gcc/10.1.0(default)              10) cray-mpich/8.0.16(default)                                       
 3) craype/2.7.2(default)            11) cray-libsci/20.10.1.2(default)                                   
 4) craype-x86-rome                  12) bolt/0.7                                                         
 5) libfabric/1.11.0.0.233(default)  13) /work/y07/shared/archer2-modules/modulefiles-cse/epcc-setup-env  
 6) craype-network-ofi               14) /usr/local/share/epcc-module/epcc-module-loader                  
 7) cray-dsmml/0.1.2(default)        15) cray-fftw/3.3.8.8(default)                                       
 8) perftools-base/20.10.0(default)  16) cray-netcdf-hdf5parallel/4.7.4.2(default) 
</code></pre></div>
<p>Now, load the <code>cpe/21.03</code> programming environment module to switch all
the currently loaded HPE Cray modules from the default (20.10) programming
environment version to the 21.03 programming environment versions:</p>
<div class="highlight"><pre><span></span><code>auser@uan02:/work/t01/t01/auser&gt; module load cpe/21.03
Switching to cray-dsmml/0.1.3.
Switching to cray-fftw/3.3.8.9.
Switching to cray-libsci/21.03.1.1.
Switching to cray-mpich/8.1.3.
Switching to cray-netcdf-hdf5parallel/4.7.4.3.
Switching to craype/2.7.5.
Switching to gcc/9.3.0.
Switching to perftools-base/21.02.0.

Loading cpe/21.03
  Unloading conflict: cray-dsmml/0.1.2 cray-fftw/3.3.8.8 cray-libsci/20.10.1.2 cray-mpich/8.0.16 cray-netcdf-hdf5parallel/4.7.4.2
    craype/2.7.2 gcc/10.1.0 perftools-base/20.10.0
  Loading requirement: cray-dsmml/0.1.3 cray-fftw/3.3.8.9 cray-libsci/21.03.1.1 cray-mpich/8.1.3 cray-netcdf-hdf5parallel/4.7.4.3
    craype/2.7.5 gcc/9.3.0 perftools-base/21.02.0
auser@uan02:/work/t01/t01/auser&gt; module list
Currently Loaded Modulefiles:
 1) cpe-gnu                                                           9) cray-dsmml/0.1.3                  17) cpe/21.03(default)  
 2) craype-x86-rome                                                  10) cray-fftw/3.3.8.9                 
 3) libfabric/1.11.0.0.233(default)                                  11) cray-libsci/21.03.1.1             
 4) craype-network-ofi                                               12) cray-mpich/8.1.3                  
 5) xpmem/2.2.35-7.0.1.0_1.9__gd50fabf.shasta(default)               13) cray-netcdf-hdf5parallel/4.7.4.3  
 6) bolt/0.7                                                         14) craype/2.7.5                      
 7) /work/y07/shared/archer2-modules/modulefiles-cse/epcc-setup-env  15) gcc/9.3.0                         
 8) /usr/local/share/epcc-module/epcc-module-loader                  16) perftools-base/21.02.0   
</code></pre></div>
<p>Finally (as noted above), you will need to modify the value of
<code>LD_LIBRARY_PATH</code> before you compile your software to ensure it picks up the
non-default versions of libraries:</p>
<div class="highlight"><pre><span></span><code>auser@uan02:/work/t01/t01/auser&gt; export LD_LIBRARY_PATH=$CRAY_LD_LIBRARY_PATH:$LD_LIBRARY_PATH
</code></pre></div>
<p>Now you can go ahead and compile your software with the new programming
environment.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The <code>cpe</code> modules only change the versions of software modules provided
as part of the HPE Cray programming environments. Any modules provided
by the ARCHER2 service will need to be loaded manually after you have
completed the process described above.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Unloading the <code>cpe</code> module does not restore the original programming environment
release. To restore the default programming environment release you should log 
out and then log back in to ARCHER2.</p>
</div>
<div class="admonition bug">
<p class="admonition-title">Bug</p>
<p>The <code>cpe/21.03</code> module has a known issue with <code>PrgEnv-gnu</code> where it loads an old version
of GCC (9.3.0) rather than the correct, newer version (10.2.0). You can resolve this by
using the sequence:
<div class="highlight"><pre><span></span><code>module restore -s PrgEnv-gnu
...load any other modules you need...
module load cpe/21.03
module unload cpe/21.03
module swap gcc gcc/10.2.0
</code></pre></div></p>
</div>
<h3 id="available-hpe-cray-programming-environment-releases-on-archer2">Available HPE Cray Programming Environment releases on ARCHER2</h3>
<p>ARCHER2 currently has the following HPE Cray Programming Environment releases available:</p>
<ul>
<li>20.08: not available via <code>cpe</code> module</li>
<li><strong>20.10: Current default</strong></li>
<li>21.03: available via <code>cpe/21.03</code> module</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can see which programming environment release you currently have loaded 
by using <code>module list</code> and looking at the version number of the <code>cray-libsci</code>
module you have loaded. The first two numbers indicate the version of the
PE you have loaded. For example, if you have <code>cray-libsci/20.10.1.2</code> loaded
then you are using the 20.10 PE release.</p>
</div>
<h2 id="using-non-default-versions-of-hpe-cray-libraries-on-archer2">Using non-default versions of HPE Cray libraries on ARCHER2</h2>
<p>If you wish to make use of non-default versions of libraries provided by HPE
Cray (usually because they are part of a non-default PE release: either old
or new) then you need to make changes at <em>both</em> compile and runtime. In summary,
you need to load the correct module and also make changes to the <code>LD_LIBRARY_PATH</code>
environment variable.</p>
<p><strong>At compile time</strong> you need to load the version of the library module before you compile
<em>and</em> set the LD_LIBRARY_PATH environment variable to include the contencts of
<code>$CRAY_LD_LIBRARY_PATH</code> as the first entry. For example, to use the, non-default, 20.08.1.2
version of HPE Cray LibSci in the default programming environment (Cray Compiler Environment,
CCE) you would first setup the environment to compile with:</p>
<div class="highlight"><pre><span></span><code>auser@uan01:~/test/libsci&gt; module swap cray-libsci cray-libsci/20.08.1.2 
auser@uan01:~/test/libsci&gt; export LD_LIBRARY_PATH=$CRAY_LD_LIBRARY_PATH:$LD_LIBRARY_PATH
</code></pre></div>
<p>The order is important here: every time you change a module, you will need to reset
the value of <code>LD_LIBRARY_PATH</code> for the process to work (it will not be updated
automatically).</p>
<p>Now you can compile your code. You can check that the executable is using the correct version 
of LibSci with the <code>ldd</code> command and look for the line beginning <code>libsci_cray.so.5</code>, you
should see the version in the path to the library file:</p>
<div class="highlight"><pre><span></span><code>auser@uan01:~/test/libsci&gt; ldd dgemv.x 
    linux-vdso.so.1 (0x00007ffe4a7d2000)
    libsci_cray.so.5 =&gt; /opt/cray/pe/libsci/20.08.1.2/CRAY/9.0/x86_64/lib/libsci_cray.so.5 (0x00007fafd6a43000)
    libdl.so.2 =&gt; /lib64/libdl.so.2 (0x00007fafd683f000)
    libxpmem.so.0 =&gt; /opt/cray/xpmem/default/lib64/libxpmem.so.0 (0x00007fafd663c000)
    libquadmath.so.0 =&gt; /opt/cray/pe/cce/10.0.4/cce/x86_64/lib/libquadmath.so.0 (0x00007fafd63fc000)
    libmodules.so.1 =&gt; /opt/cray/pe/cce/10.0.4/cce/x86_64/lib/libmodules.so.1 (0x00007fafd61e0000)
    libfi.so.1 =&gt; /opt/cray/pe/cce/10.0.4/cce/x86_64/lib/libfi.so.1 (0x00007fafd5abe000)
    libcraymath.so.1 =&gt; /opt/cray/pe/cce/10.0.4/cce/x86_64/lib/libcraymath.so.1 (0x00007fafd57e2000)
    libf.so.1 =&gt; /opt/cray/pe/cce/10.0.4/cce/x86_64/lib/libf.so.1 (0x00007fafd554f000)
    libu.so.1 =&gt; /opt/cray/pe/cce/10.0.4/cce/x86_64/lib/libu.so.1 (0x00007fafd523b000)
    libcsup.so.1 =&gt; /opt/cray/pe/cce/10.0.4/cce/x86_64/lib/libcsup.so.1 (0x00007fafd5035000)
    libstdc++.so.6 =&gt; /opt/cray/pe/gcc-libs/libstdc++.so.6 (0x00007fafd4c62000)
    libpthread.so.0 =&gt; /lib64/libpthread.so.0 (0x00007fafd4a43000)
    libc.so.6 =&gt; /lib64/libc.so.6 (0x00007fafd4688000)
    libm.so.6 =&gt; /lib64/libm.so.6 (0x00007fafd4350000)
    /lib64/ld-linux-x86-64.so.2 (0x00007fafda988000)
    librt.so.1 =&gt; /lib64/librt.so.1 (0x00007fafd4148000)
    libgfortran.so.5 =&gt; /opt/cray/pe/gcc-libs/libgfortran.so.5 (0x00007fafd3c92000)
    libgcc_s.so.1 =&gt; /opt/cray/pe/gcc-libs/libgcc_s.so.1 (0x00007fafd3a7a000)
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If any of the libraries point to versions in the <code>/opt/cray/pe/lib64</code> directory
then these are using the default versions of the libraries rather than the 
specific versions. This happens at compile time if you have forgotton to load 
the right module and set <code>$LD_LIBRARY_PATH</code> afterwards.</p>
</div>
<p><strong>At run time</strong> (typically in your job script) you need to repeat the environment
setup steps (you can also use the <code>ldd</code> command in your job submission script to 
check the library is pointing to the correct version). For example, a job submission
script to run our <code>dgemv.x</code> executable with the non-default version of LibSci could
look like:</p>
<div class="highlight"><pre><span></span><code>#!/bin/bash
#SBATCH --job-name=dgemv
#SBATCH --time=0:20:0
#SBATCH --nodes=1
#SBATCH --ntasks-per-node=1
#SBATCH --cpus-per-task=1

# Replace the account code, partition and QoS with those you wish to use
#SBATCH --account=t01        
#SBATCH --partition=standard
#SBATCH --qos=short
#SBATCH --reservation=shortqos

# Load the standard environment module
module load epcc-job-env

# Setup up the environment to use the non-default version of LibSci
#   We use &quot;module swap&quot; as the &quot;cray-libsci&quot; is loaded by default.
#   This must be done after loading the &quot;epcc-job-env&quot; module
module swap cray-libsci cray-libsci/20.08.1.2
export LD_LIBRARY_PATH=$CRAY_LD_LIBRARY_PATH:$LD_LIBRARY_PATH

# Check which library versions the executable is pointing too
ldd dgemv.x

export OMP_NUM_THREADS=1

srun --hint=nomultithread --distribution=block:block dgemv.x
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>As when compiling, the order of commands matters. Setting the value of
<code>LD_LIBRARY_PATH</code> must happen after you have finished all your <code>module</code>
commands for it to have the correct effect.</p>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>You must setup the environment at both compile and run time otherwise
you will end up using the default version of the library.</p>
</div>
<h2 id="compiling-in-compute-nodes">Compiling in compute nodes</h2>
<p>Sometimes you may wish to compile in a batch job. For example, the compile process may take a long time or the compile process is part of the research workflow and can be coupled to the production job. Unlike login nodes, the <code>/home</code> file system is not available.</p>
<p>An example job submission script for a compile job using <code>make</code> (assuming the Makefile is in the same directory as the job submission script) would be:</p>
<div class="highlight"><pre><span></span><code>#!/bin/bash

#SBATCH --job-name=compile
#SBATCH --time=00:20:00
#SBATCH --nodes=1
#SBATCH --ntasks-per-node=1
#SBATCH --cpus-per-task=1

# Replace the account code, partition and QoS with those you wish to use
#SBATCH --account=t01        
#SBATCH --partition=standard
#SBATCH --qos=standard

# Load the compilation environment (cray, gnu or aocc)
module restore /etc/cray-pe.d/PrgEnv-cray

make clean

make
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Do not forget to include the full path when the
compilation environment is restored. For instance:</p>
<p><code>module restore /etc/cray-pe.d/PrgEnv-cray</code></p>
</div>
<p>You can also use a compute node in an interactive way using <code>salloc</code>. Please see
Section <a href="../scheduler/#using-salloc-to-reserve-resources">Using salloc to reserve resources</a>
for further details. Once your interactive session is ready, you can load the compilation environment and compile the code.</p>
<h2 id="build-instructions-for-software-on-archer2">Build instructions for software on ARCHER2</h2>
<p>The ARCHER2 CSE team at <a href="https://www.epcc.ed.ac.uk">EPCC</a> and other contributors
provide build configurations ando instructions for a range of research
software, software libraries and tools on a variety of HPC systems (including
ARCHER2) in a public Github repository. See:</p>
<ul>
<li><a href="https://www.github.com/HPC-UK/build-instructions">Build instructions repository</a></li>
</ul>
<p>The repository always welcomes contributions from the ARCHER2 user community.</p>
<h2 id="support-for-building-software-on-archer2">Support for building software on ARCHER2</h2>
<p>If you run into issues building software on ARCHER2 or the software you
require is not available then please contact the
<a href="https://www.archer2.ac.uk/support-access/servicedesk.html">ARCHER2 Service Desk</a>
with any questions you have.</p>









  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/ARCHER2-HPC" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/ARCHER2_HPC" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/groups/13848871/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["tabs"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.8fd75fb4.min.js"></script>
      
    
  </body>
</html>